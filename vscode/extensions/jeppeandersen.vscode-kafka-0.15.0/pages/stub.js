let wizardMap=new Map;const cssColorRegex=/^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\((-?\d+%?)[,\s]+(-?\d+%?)[,\s]+(-?\d+%?)[,\s]*(-?[\d.]+%?)?\))$/i;function initEventListener(fn){window.addEventListener("message",(event=>{const message=event.data;if(message.command.match(/Response$/)&&message.contents){let contentSectionModified=!1;if(message.contents.forEach((e=>{"content"===e.id&&(contentSectionModified=!0);let t=document.getElementById(e.id);null===t?console.error(e.id+" is null"):t.innerHTML=e.body})),contentSectionModified){var onloads=document.querySelectorAll("[data-onload]");for(onloadsIterator=0;onloadsIterator<onloads.length;onloadsIterator++){const asId=onloads[onloadsIterator].id,onloadVal=findDataOnloadValue(onloads[onloadsIterator]);if(onloadVal)try{eval(onloadVal)}catch(e){console.log(e)}}}}else if("openFileDialogResponse"===message.command){const e=message.result.returnObject,{fieldId:t,fsPath:o}=e;if(o){const e=document.getElementById(t);e.value=o,fieldChanged(e)}}else fn&&fn(message);const focusedField=message?.focusedField;if(focusedField){const e=document.getElementById(focusedField);null!==e&&e.focus()}}))}function findDataOnloadValue(e){for(i=0,atts=e.attributes,n=atts.length;i<n;i++)if("data-onload"===atts[i].nodeName)return atts[i].nodeValue}function loadWizard(){initEventListener((function(e){if(e&&e.result){const t=new Map(Object.entries(e.result));wizardMap=t,postCommandWithMap("ready")}})),initializeAndWatchThemeColors()}function fieldChanged(e,t){const o=void 0!==t?t:e.value;wizardMap.set(e.id,o),postCommandWithMap("validate")}function fieldChangedKeyVal(e,t){wizardMap.set(e,t),postCommandWithMap("validate")}function nextPressed(){postCommandWithMap("nextPressed")}function backPressed(){postCommandWithMap("backPressed")}function finishPressed(){postCommandWithMap("finishPressed")}function openFileDialog(e,t){vscode.postMessage({command:"openFileDialog",parameters:{fieldId:e,options:t}})}function postCommandWithMap(e){vscode.postMessage({command:e,parameters:Object.fromEntries(wizardMap)})}function adjustLight(e,t){const o=e+t,n=t<0?o<0?0:o:o>255?255:o;return Math.round(n)}function darken(e,t){return lighten(e,-t)}function lighten(e,t){const o=toRgba(e);if(null===o)return e;const[n,r,i,l]=o,s=255*t/100;return`rgba(${adjustLight(n,s)}, ${adjustLight(r,s)}, ${adjustLight(i,s)}, ${l})`}function opacity(e,t){const o=toRgba(e);if(null===o)return e;const[n,r,i,l]=o;return`rgba(${n}, ${r}, ${i}, ${l*(t/100)})`}function toRgba(e){e=e.trim();const t=cssColorRegex.exec(e);if(null===t)return null;if("#"===t[1]){const e=t[2];switch(e.length){case 3:return[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),1];case 6:return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),1]}return null}switch(t[3]){case"rgb":return[parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10),1];case"rgba":return[parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10),parseFloat(t[7])];default:return null}}function initializeAndWatchThemeColors(){const e=()=>{const e=document.body,t=window.getComputedStyle(e),o=e.style,n=t.getPropertyValue("--vscode-font-family").trim();n?(o.setProperty("--font-family",n),o.setProperty("--font-size",t.getPropertyValue("--vscode-font-size").trim()),o.setProperty("--font-weight",t.getPropertyValue("--vscode-font-weight").trim())):(o.setProperty("--font-family",t.getPropertyValue("--vscode-editor-font-family").trim()),o.setProperty("--font-size",t.getPropertyValue("--vscode-editor-font-size").trim()),o.setProperty("--font-weight",t.getPropertyValue("--vscode-editor-font-weight").trim()));let r=t.getPropertyValue("--vscode-editor-background").trim();o.setProperty("--color-background",r),o.setProperty("--color-background--lighten-05",lighten(r,5)),o.setProperty("--color-background--darken-05",darken(r,5)),o.setProperty("--color-background--lighten-075",lighten(r,7.5)),o.setProperty("--color-background--darken-075",darken(r,7.5)),o.setProperty("--color-background--lighten-15",lighten(r,15)),o.setProperty("--color-background--darken-15",darken(r,15)),o.setProperty("--color-background--lighten-30",lighten(r,30)),o.setProperty("--color-background--darken-30",darken(r,30)),o.setProperty("--color-background--lighten-50",lighten(r,50)),o.setProperty("--color-background--darken-50",darken(r,50)),r=t.getPropertyValue("--vscode-button-background").trim(),o.setProperty("--color-button-background",r),o.setProperty("--color-button-background--darken-30",darken(r,30)),r=t.getPropertyValue("--vscode-button-secondaryBackground").trim(),o.setProperty("--color-button-secondary-background",r),o.setProperty("--color-button-secondary-background--darken-30",darken(r,30)),r=t.getPropertyValue("--vscode-button-background").trim(),o.setProperty("--color-highlight",r),o.setProperty("--color-highlight--75",opacity(r,75)),o.setProperty("--color-highlight--50",opacity(r,50)),o.setProperty("--color-highlight--25",opacity(r,25)),r=t.getPropertyValue("--vscode-button-foreground").trim(),o.setProperty("--color-button-foreground",r),r=t.getPropertyValue("--vscode-editor-foreground").trim(),r||(r=t.getPropertyValue("--vscode-foreground").trim()),o.setProperty("--color-foreground",r),o.setProperty("--color-foreground--85",opacity(r,85)),o.setProperty("--color-foreground--75",opacity(r,75)),o.setProperty("--color-foreground--65",opacity(r,65)),o.setProperty("--color-foreground--50",opacity(r,50)),r=t.getPropertyValue("--vscode-focusBorder").trim(),o.setProperty("--color-focus-border",r),r=t.getPropertyValue("--vscode-textLink-foreground").trim(),o.setProperty("--color-link-foreground",r),o.setProperty("--color-link-foreground--darken-20",darken(r,20)),o.setProperty("--color-link-foreground--lighten-20",lighten(r,20))},t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),e(),t}function comboFieldChanged(e){const t=document.getElementById(e);t.value||""===t.value?comboDropDownForTags(e,t.value):hideComboList(e),fieldChangedKeyVal(e,t.value)}function initComboField(e){const t=document.getElementById(e);t.addEventListener("keypress",(t=>{"Enter"===t.code&&selectHighlightedCombo(e),hideComboList(e),initComboList(e)})),t.addEventListener("click",(()=>{comboDropDownForTags(t.id,(t.value||"").trim())})),comboRegisterKeyUpDownListener(e)}function isComboListVisible(e){return"true"===document.getElementById(e+"_innerUL").getAttribute("data-toggle")}function showComboList(e){document.getElementById(e+"_innerUL").setAttribute("data-toggle","true")}function selectHighlightedCombo(e){console.log("selectHighlightedCombo");const t=document.getElementById(e+"_listgroup").querySelectorAll("li ul li");for(let o=0;o<t.length;o++)if("true"===t[o].getAttribute("data-highlight"))return void selectComboElement(e,t[o])}function selectComboElement(e,t){console.log("selectComboElement");const o=document.getElementById(e);o.value=t.innerHTML,fieldChangedKeyVal(e,o.value),hideComboList(e)}function highlightComboElement(e,t){const o=document.getElementById(e+"_listgroup").querySelectorAll("li ul li");for(let e=0;e<o.length;e++){const n=t===o[e];o[e].setAttribute("data-highlight",n)}}function hideComboList(e){console.log("hideComboList"),document.getElementById(e+"_innerUL").setAttribute("data-toggle","false")}function delayedHideComboList(e){console.log("Calling delayedHideComboList"),setTimeout((function(){console.log("About to call hideComboList"),hideComboList(e)}),250)}function initComboItem(e,t){console.log("initComboItem"),t.setAttribute("data-display",!0),t.setAttribute("data-highlight",!1)}function initComboList(e){console.log("initComboList");const t=document.getElementById(e+"_listgroup").querySelectorAll("li ul li");for(let o=0;o<t.length;o++)initComboItem(e,t[o])}function comboCopyPasteFor(e){return()=>{document.getElementById(e).value=this.innerHTML,initList(),hideList(listGroup)}}function comboDropDownForTags(e,t){const o=document.getElementById(e+"_listgroup").querySelectorAll("li ul li");let n=!1;for(let e=0;e<o.length;e++){const r=comboMatching(o[e],t.trim());n||"true"!==r||(o[e].setAttribute("data-highlight",!0),n=!0)}showComboList(e)}function comboMatching(e,t){let o="false";return(!t||""===t||e&&e.innerHTML&&e.innerHTML.startsWith(t))&&(o="true"),e.setAttribute("data-display",o),e.setAttribute("data-highlight",!1),o}function comboRegisterKeyUpDownListener(e){const t=document.getElementById(e);t.onkeydown=function(o){if("Escape"===o.code&&hideComboList(e),"ArrowUp"!==o.code&&"ArrowDown"!==o.code)return;const n=isComboListVisible(e);if(!n)return void comboDropDownForTags(t.id,(t.value||"").trim());const r=document.getElementById(e+"_listgroup").querySelectorAll('li ul li[data-display="true"]');let i=-1;for(let e=0;e<r.length;e++)"true"===r[e].getAttribute("data-highlight")&&(i=e);const l="ArrowUp"===o.code,s=i<=0?r.length-1:i-1,a=i>=r.length-1?0:i+1,d=l?s:a;n||comboDropDownForTags(e,document.getElementById(e).value);for(let e=0;e<r.length;e++)r[e].setAttribute("data-highlight",e===d),e===d&&(console.log("Highlighted element has scrolltop of "+r[e].scrollTop),r[e].scrollIntoView())}}